# 4.1

根据相应得文档:输入`./process-run.py -l 5:100,5:100`是会报错的。因为这不是运行python脚本的方式。所以应该是`python process-run.py -l 5:100,5:100`这样。

`python process-run.py -l 5:100,5:100`这条指令的真正含义是CPU中有两个进程，分别做`5`条指令，且这5条指令的CPU占用率都是`100%`。

**综上，CPU的利用率就是`100%`。**

利用`-c`查看结果，即输入：`python process-run.py -l 5:100,5:100 -c`。看到在运行PID:0的进程时候PID:1进程已经就绪。在运行完毕PID:0之后开始运行PID:1进程。整个过程中CPU一直是在利用率`100%`的状态下的。期间没有任何的`I/O`操作。

最后利用：`python process-run.py -l 5:100,5:100 -c -p`可以直接看到CPU占用率为`100%`。说明想法正确。

# 4.2


看了`-c`的提示之后才发现需要时间为10。

其实这道题目时间不应该是10这种固定时间的，因为题目中没有给出IO的时间具体是多久。所以应该是下面的表达式
$$
Time = 4 + 1 + n + 1
$$

4个相加的数分别代表：
1. PID:0的4个指令占用4个单位时间。
2. CPU发出指令，要开始IO操作，阻塞该进程使用1个单位的时间。
3. 系统在等待IO操作的结束，此时CPU上没有任何事情的发生，因为此刻没有任何进程占用CPU。
4. IO操作完毕，CPU解除PID:1进程的阻塞。但是这个进程只进行IO操作，所以完成。

但是为什么这里一定是10呢？那么显然这是编写这个模拟器的人设置的默认值。可以在代码中寻找默认值的设置:
~~~ python
parser.add_option('-L', '--iolength', default=5, help='how long an IO takes', action='store', type='int', dest='io_length')
~~~
可以看到default默认参数为5，所以这里的`n`就是`5-1`也就是4。所以总时间为10。

# 4.3

需要时间为6。

在经过第二问的分析之后我们就可以很简单的得出结论：系统会经过三个步骤。
1. PID: 0的进程发起IO，CPU阻塞这个进程
2. PID: 1的进程在CPU上运行4个指令，这段时间里IO操作恰好完成。
3. PID: 0的进程执行的IO完成，CPU解除这个进程的阻塞状态，然后这个进程完成执行的操作。

所以时间为 `1+4+1` 也就是 6。 运行指令`python process-run.py -l 1:0,4:100 -c -p`。发现和思考过程一致，结论也一致。

# 4.4

运行`python process-run.py -l 1:0,4:100 -c -S SWITCH_ON_END`。

和第三问一样的执行要求，但是如果系统不进行切换进程的话。系统经历的步骤：
1. PID: 0的进程发起IO，CPU不阻塞这个进程。PID：1的进程已经准备就绪。
2. PID：0的进程用时4个时间单位完成IO操作
3. PID：0的进程结束IO操作，系统不用解除阻塞，因为PID：0的进程一直在运行。所以直接运行PID：1的4条指令

所以总用时：`5+4` 也就是9个单位时间。

# 4.5

输入指令：`python process-run.py -l 1:0,4:100 -c -S SWITCH_ON_IO`.

但是其实不用执行就已经知道结果了，因为这个模拟器默认就是`SWITCH_ON_IO`的。所以就是运行6个单位时间。